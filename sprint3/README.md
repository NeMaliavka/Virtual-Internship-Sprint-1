# REST API для управления перевалами

## Описание проекта

Этот проект представляет собой REST API, который позволяет пользователям добавлять, редактировать и получать информацию о перевалах. API взаимодействует с базой данных PostgreSQL, где хранятся все данные о перевалах. Реализована возможность модерации перевалов с использованием статусов.

## Задачи проекта

### Задача 1: Создание базы данных
- Установка и настройка PostgreSQL.
- Добавление поля `status` в таблицу перевалов для хранения статуса модерации:
  - `new` — новый перевал.
  - `pending` — перевал на модерации.
  - `accepted` — перевал принят.
  - `rejected` — перевал отклонен.

### Задача 2: Создание класса по работе с данными
- Реализация класса для взаимодействия с базой данных.
- Методы для добавления, получения и обновления информации о перевалах.
- Использование переменных окружения для конфиденциальной информации о подключении к базе данных.

### Задача 3: Создание REST API
- Реализация метода `POST /submitData` для добавления нового перевала.
- Реализация дополнительных методов для получения и редактирования данных перевалов.

### Задача 4: Добавление новых методов
- Реализация методов:
  - `GET /submitData/<id>` — получение перевала по ID.
  - `PATCH /submitData/<id>` — редактирование перевала, если статус `new`.
  - `GET /submitData/?user__email=<email>` — получение всех перевалов пользователя по email.

## Установка

1. Установите PostgreSQL на Вашем компьютере.
2. Создайте базу данных и таблицы, используя предоставленные SQL-скрипты.
3. Установите необходимые зависимости:
   ```bash
   pip install Flask psycopg2
Настройте переменные окружения для подключения к базе данных:

- export FSTR_DB_HOST='localhost'
- export FSTR_DB_PORT='5432'
- export FSTR_DB_LOGIN='your_username'
- export FSTR_DB_PASS='your_password'

#### Использование API
Запуск сервера
Запустите сервер с помощью следующей команды:


python app.py
Сервер будет доступен по адресу http://localhost:5000.

Эндпоинты API
1. Добавление нового перевала
- Метод: POST
- URL: /submitData
- Тело запроса (JSON):

{
    "raw_data": {
        "name": "Перевал Эльбрус",
        "height": 5642,
        "location": "Кавказ",
        ...
    }
}

Ответ:
- Статус 201: Успешно добавлено.
- Статус 400: Ошибка, если raw_data не предоставлено.
2. Получение перевала по ID
- Метод: GET
- URL: /submitData/<id>
Ответ:
- Статус 200: Возвращает объект перевала.
- Статус 404: Запись не найдена.
3. Редактирование перевала
- Метод: PATCH
- URL: /submitData/<id>
- Тело запроса (JSON):

{
    "raw_data": {
        "name": "Обновленный Перевал Эльбрус",
        "height": 5643,
        ...
    }
}
Ответ:
- Статус 200: Успешно обновлено.
- Статус 400: Ошибка, если статус не new.
4. Получение перевалов пользователя по email
- Метод: GET
- URL: /submitData/?user__email=<email>
Ответ:
- Статус 200: Возвращает список перевалов пользователя.
- Статус 400: Ошибка, если email не предоставлен.
Примечания
Убедитесь, что у Вас установлены все необходимые зависимости и правильно настроены переменные окружения.
Для тестирования API можно использовать инструменты, такие как Postman или curl.
